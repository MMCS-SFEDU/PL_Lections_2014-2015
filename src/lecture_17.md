# Лекция 17

## Стандартная библиотека C++

### Иерархия потоковоых классов ввода/вывода

`cin` имеет тип `istream`
`cout` имеет тип `ostream`

Требуют подключения `# include <iostream>`

[img](Иерархия потоковоых классов io)

Заметим, что на примре `iostream` можно наблюдать множественное наследование (ромбовидное)


### Файловые потоки

```cpp
#include <fstream>
{
	ifstream ifs("a.txt");
	// по-умолчанию открывается как текстовый
	
	int i, j;
	ifs >> i >> j; // 3_4
} // здесь неявно в деструкторе будет вызван ifs.close()

{
	ofstream ofs("b.txt");
	ofs << i << "  " << j << endl;
	Frac f(1, 2);
	ofs << f;
} // так же вызовется ofs.close()
```

Благодаря наследованию мы так же можем выводить в файл дроби, аналогично с вводом.

Рассмотрим другой пример:

```cpp
ofstream to1("c.txt", ios.base::app);
while(!ifs.eof())
	getline(ifs, s); // s - имеет тип string
```

Здесь деменострируется открытие файла в режиме дозаписи

Иногда этот код можно заменить на:

```cpp
ofstream to1("c.txt", ios.base::app);
while(ifs)
	getline(ifs, s);
```

`if(!ifs)` ~ `if(ifs.eof())`


### Строковые потоки

Файлы, строки ... являются разными типами данных, а потоки позволяют унифицировать работу с этими данными.

```cpp
#include <sstream>

ostringstream os;
os << i << " " << j << frac(1, 2);
cout << os;
const char * cc = os.c_str();
```

Аналогично:

```cpp
#include <sstream>

istringstream is("12 345");
is >> i >> j;
```


## Стандартная библиотека шаблонов (STL)

Эта библиотека появилась в C++ не сразу, но достаточно давно.

**STL** состоит из:

1. Контейнерные классы (`vector<T>`, `list<T>`, `set<T>`, `map<K,V>`, `queue<T>`, `stack<T>`... ≈10)
2. Итераторы - обобщенные указатели на элементы контейнера
3. Алоритмы (≈60)
4. Объекты-функции (функторы) -> лямбда-выражения

### Общая характкристика STL

1. Компактность
2. *Эффективность* в ущерб безопасности
3. Не используются наследование и полиморфизм для *эффективности*
4. Универсальность
5. 0 байт в откомпилированном виде т.к вся бибилиотека состоит из заголовочных файлов
6. Тяжелые сообщения об ошибках


### Некоторые алгоритмы

```cpp
template<typename It, typename It1>
void copy(It b, It e, It1 b1)
{
	while(b != e)
		*b1 = *b;
	++b;
	++b1;
}
```














